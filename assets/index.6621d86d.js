var u=Object.defineProperty;var g=(o,t,e)=>t in o?u(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e;var i=(o,t,e)=>(g(o,typeof t!="symbol"?t+"":t,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function e(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerpolicy&&(n.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?n.credentials="include":r.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(r){if(r.ep)return;r.ep=!0;const n=e(r);fetch(r.href,n)}})();class f{constructor(){i(this,"debugContainer");i(this,"showDebug",!1);i(this,"updateFuncs",[]);this.debugContainer=document.createElement("section"),this.debugContainer.classList.add("debug"),this.debugContainer.style.background="rgba(255, 76, 255, 0.1)",this.debugContainer.style.color="white",this.debugContainer.style.visibility="hidden",this.debugContainer.style.display="inline-block",this.debugContainer.style.overflow="auto",this.debugContainer.style.resize="both";const t=document.createElement("h1");t.textContent="debug",this.debugContainer.append(t),document.body.append(this.debugContainer),window.addEventListener("keydown",({key:e})=>{e==="d"&&(this.showDebug=!this.showDebug,this.debugContainer.style.visibility=this.showDebug?"hidden":"visible")})}addSlider(t,e,s,r){const n=document.createElement("div"),a=document.createElement("input");a.type="range",a.min="0",a.step="1",a.max=`${s()}`,a.value=`${e()}`;const l=document.createElement("label");l.textContent=`${t}`;const h=document.createElement("output");n.appendChild(l),n.appendChild(a),n.appendChild(h),this.debugContainer.appendChild(n);const d=()=>{r(a.valueAsNumber),a.max=`${s()}`,a.value=`${e()}`,h.textContent=`${e()}`};a.addEventListener("input",()=>d()),a.addEventListener("change",()=>d()),this.updateFuncs.push(d)}update(){this.updateFuncs.forEach(t=>t())}toggle(){this.debugContainer.style.visibility=this.debugContainer.style.visibility==="hidden"?"visible":"hidden"}}class m{constructor(t,e){i(this,"gl");i(this,"data");i(this,"count");i(this,"renderId");this.gl=t,this.data=e,this.count=this.data.length,this.renderId=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.renderId),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,this.data,this.gl.STATIC_DRAW)}bind(){this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.renderId)}delete(){this.gl.deleteBuffer(this.renderId)}}class p{constructor(t,e,s){i(this,"gl");i(this,"vsSource");i(this,"fsSource");i(this,"renderId");i(this,"uniformLocations",new Map);this.gl=t,this.vsSource=e,this.fsSource=s,this.renderId=this.createShader()}delete(){this.gl.deleteProgram(this.renderId)}bind(){this.gl.useProgram(this.renderId)}setUniform4f(t,e,s,r,n){this.gl.uniform4fv(this.getUniformLocation(t),new Float32Array([e,s,r,n]))}setUniform2f(t,e,s){this.gl.uniform2fv(this.getUniformLocation(t),new Float32Array([e,s]))}setUniform1i(t,e){this.gl.uniform1i(this.getUniformLocation(t),e)}setUniformMat4f(t,e){this.gl.uniformMatrix4fv(this.getUniformLocation(t),!1,e)}getUniformLocation(t){var s;if(!this.renderId)return null;if(this.uniformLocations.has(t))return(s=this.uniformLocations.get(t))!=null?s:null;const e=this.gl.getUniformLocation(this.renderId,t);return e||console.warn("[WARN] Uniform :",t,"not found"),this.uniformLocations.set(t,e),e}createShader(){var a;const t=this.gl.createProgram(),e=this.compileShader(this.vsSource,this.gl.VERTEX_SHADER),s=this.compileShader(this.fsSource,this.gl.FRAGMENT_SHADER);if(this.gl.attachShader(t,e),this.gl.attachShader(t,s),this.gl.linkProgram(t),this.gl.validateProgram(t),this.gl.deleteShader(e),this.gl.deleteShader(s),this.gl.getProgramParameter(t,this.gl.LINK_STATUS))return t;const n=(a=this.gl.getProgramInfoLog(t))!=null?a:"";return console.error(n),this.delete(),null}compileShader(t,e){var a;const s=this.gl.createShader(e);if(this.gl.shaderSource(s,t),this.gl.compileShader(s),this.gl.getShaderParameter(s,this.gl.COMPILE_STATUS))return s;const n=(a=this.gl.getShaderInfoLog(s))!=null?a:"";return console.error(n),this.gl.deleteShader(s),null}}class v{constructor(t){i(this,"gl");i(this,"renderId");this.gl=t,this.renderId=this.gl.createVertexArray()}bind(){this.gl.bindVertexArray(this.renderId)}delete(){this.gl.deleteVertexArray(this.renderId)}addBuffer(t,e){this.bind(),t.bind();let s=0;e.elements.forEach((r,n)=>{const{count:a,type:l,normalized:h}=r,{stride:d}=e;this.gl.enableVertexAttribArray(n),this.gl.vertexAttribPointer(n,a,l,h,d,s),s+=r.count*r.size})}}class b{constructor(t,e){i(this,"gl");i(this,"data");i(this,"renderId");this.gl=t,this.data=e,this.renderId=t.createBuffer(),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.renderId),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.data,this.gl.STATIC_DRAW)}bind(){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.renderId)}delete(){this.gl.deleteBuffer(this.renderId)}}class y{constructor(t){i(this,"gl");i(this,"elements",[]);i(this,"stride",0);this.gl=t}pushFloat(t){this.elements.push({count:t,type:this.gl.FLOAT,normalized:!1,size:4}),this.stride+=4*t}pushUint(t){this.elements.push({count:t,type:this.gl.UNSIGNED_INT,normalized:!1,size:4}),this.stride+=4*t}}var c=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var o=0,t=arguments.length;t--;)o+=arguments[t]*arguments[t];return Math.sqrt(o)});function w(){var o=new c(2);return c!=Float32Array&&(o[0]=0,o[1]=0),o}function A(o,t){var e=new c(2);return e[0]=o,e[1]=t,e}(function(){var o=w();return function(t,e,s,r,n,a){var l,h;for(e||(e=2),s||(s=0),r?h=Math.min(r*e+s,t.length):h=t.length,l=s;l<h;l+=e)o[0]=t[l],o[1]=t[l+1],n(o,o,a),t[l]=o[0],t[l+1]=o[1];return t}})();const S=`#version 300 es

uniform vec2 u_Resolution;
uniform vec2 u_Translation;
uniform vec2 u_Rotation;

in vec2 a_Position;

void main() {
  vec2 rotation = vec2(
    a_Position.x * u_Rotation.y + a_Position.y * u_Rotation.x,
    a_Position.y * u_Rotation.y - a_Position.x * u_Rotation.x
  );

  vec2 position  = rotation + u_Translation;
  vec2 zeroToOne = position / u_Resolution;
  vec2 zeroToTwo = zeroToOne * 2.0;
  vec2 clipSpace = zeroToTwo - 1.0;

  gl_Position = vec4( clipSpace * vec2( 1, -1 ), 0, 1 );
}`,_=`#version 300 es

precision highp float;

uniform vec4 u_Color;

out vec4 outColor;

void main() {
  outColor = u_Color;
}`;class E{constructor(t){i(this,"gl");i(this,"ibo");i(this,"indices");i(this,"layout");i(this,"positions");i(this,"program");i(this,"vao");i(this,"vbo");i(this,"color",[Math.random(),Math.random(),Math.random(),1]);i(this,"height",100);i(this,"rotation",90);i(this,"translation",A(0,0));i(this,"width",100);i(this,"x",0);i(this,"y",0);this.gl=t,this.positions=new Float32Array([0,0,this.width,0,this.width,this.height,0,this.height]),this.indices=new Uint32Array([0,1,2,2,3,0]),this.layout=new y(this.gl),this.layout.pushFloat(2),this.vao=new v(this.gl),this.vbo=new b(this.gl,this.positions),this.ibo=new m(this.gl,this.indices),this.vao.bind(),this.vao.addBuffer(this.vbo,this.layout),this.program=new p(this.gl,S,_),this.program.bind(),this.program.setUniform4f("u_Color",...this.color),this.program.setUniform2f("u_Translation",this.x,this.y),this.program.setUniform2f("u_Rotation",Math.cos(this.rotation*Math.PI/180),Math.sin(this.rotation*Math.PI/180))}update(t){return t}draw(){this.vao.bind(),this.ibo.bind(),this.program.bind(),this.program.setUniform2f("u_Resolution",this.gl.canvas.width,this.gl.canvas.height),this.program.setUniform2f("u_Translation",this.x,this.y),this.program.setUniform2f("u_Rotation",Math.cos(this.rotation*Math.PI/180),Math.sin(this.rotation*Math.PI/180)),this.gl.drawElements(this.gl.TRIANGLES,this.ibo.count,this.gl.UNSIGNED_INT,0)}}class R{constructor(t){i(this,"gl");i(this,"geometries",new Array);this.gl=t}addGeometry(t){this.geometries.push(t)}update(t){this.geometries.forEach(e=>{e.update(t)})}draw(){(this.gl.canvas.width!==this.gl.canvas.clientWidth||this.gl.canvas.height!==this.gl.canvas.clientHeight)&&(this.gl.canvas.width=this.gl.canvas.clientWidth,this.gl.canvas.height=this.gl.canvas.clientHeight,this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height)),this.gl.clearColor(0,0,0,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.geometries.forEach(t=>{t.draw()})}}const I=()=>{const t=document.querySelector("canvas").getContext("webgl2");if(!t){console.error("Unable to Initialize WebGL");return}t.viewport(0,0,t.canvas.width,t.canvas.height);const e=new E(t),s=new R(t),r=new f;r.addSlider("x",()=>e.x,()=>t.canvas.width,h=>e.x=h),r.addSlider("y",()=>e.y,()=>t.canvas.height,h=>e.y=h),r.addSlider("rotation",()=>e.rotation,()=>360,h=>e.rotation=h),s.addGeometry(e);let n=0,a=0;const l=h=>{requestAnimationFrame(l),a=h-n,n=h,s.update(a),r.update(),s.draw()};requestAnimationFrame(l)};window.addEventListener("load",I);
