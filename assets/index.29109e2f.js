var w=Object.defineProperty;var S=(e,t,i)=>t in e?w(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var n=(e,t,i)=>(S(e,typeof t!="symbol"?t+"":t,i),i);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const h of o.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function i(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerpolicy&&(o.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?o.credentials="include":r.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(r){if(r.ep)return;r.ep=!0;const o=i(r);fetch(r.href,o)}})();class E{constructor(){n(this,"debugContainer");n(this,"showDebug",!1);n(this,"updateFuncs",[]);this.debugContainer=document.createElement("section"),this.debugContainer.classList.add("debug"),this.debugContainer.style.background="rgba(255, 76, 255, 0.1)",this.debugContainer.style.color="white",this.debugContainer.style.visibility="hidden",this.debugContainer.style.display="inline-block",this.debugContainer.style.overflow="auto",this.debugContainer.style.resize="both";const t=document.createElement("h1");t.textContent="debug",this.debugContainer.append(t),document.body.append(this.debugContainer),window.addEventListener("keydown",({key:i})=>{i==="d"&&(this.showDebug=!this.showDebug,this.debugContainer.style.visibility=this.showDebug?"hidden":"visible")})}addSlider(t,i,s,r,o){const h=document.createElement("div"),a=document.createElement("input");a.type="range",a.min="0",a.step=`${r}`,a.max=`${s()}`,a.value=`${i()}`;const l=document.createElement("label");l.textContent=`${t}`;const g=document.createElement("output");h.appendChild(l),h.appendChild(a),h.appendChild(g),this.debugContainer.appendChild(h);const u=()=>{o(a.valueAsNumber),a.max=`${s()}`,a.value=`${i()}`,g.textContent=`${i()}`};a.addEventListener("input",()=>u()),a.addEventListener("change",()=>u()),this.updateFuncs.push(u)}update(){this.updateFuncs.forEach(t=>t())}toggle(){this.debugContainer.style.visibility=this.debugContainer.style.visibility==="hidden"?"visible":"hidden"}}class I{constructor(t,i){n(this,"gl");n(this,"data");n(this,"count");n(this,"renderId");this.gl=t,this.data=i,this.count=this.data.length,this.renderId=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.renderId),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,this.data,this.gl.STATIC_DRAW)}bind(){this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.renderId)}delete(){this.gl.deleteBuffer(this.renderId)}}class C{constructor(t,i,s){n(this,"gl");n(this,"vsSource");n(this,"fsSource");n(this,"renderId");n(this,"uniformLocations",new Map);this.gl=t,this.vsSource=i,this.fsSource=s,this.renderId=this.createShader()}delete(){this.gl.deleteProgram(this.renderId)}bind(){this.gl.useProgram(this.renderId)}setUniform4f(t,i,s,r,o){this.gl.uniform4fv(this.getUniformLocation(t),new Float32Array([i,s,r,o]))}setUniform2f(t,i,s){this.gl.uniform2fv(this.getUniformLocation(t),new Float32Array([i,s]))}setUniform1i(t,i){this.gl.uniform1i(this.getUniformLocation(t),i)}setUniformMat3f(t,i){this.gl.uniformMatrix3fv(this.getUniformLocation(t),!1,i)}setUniformMat4f(t,i){this.gl.uniformMatrix4fv(this.getUniformLocation(t),!1,i)}getUniformLocation(t){var s;if(!this.renderId)return null;if(this.uniformLocations.has(t))return(s=this.uniformLocations.get(t))!=null?s:null;const i=this.gl.getUniformLocation(this.renderId,t);return i||console.warn("[WARN] Uniform :",t,"not found"),this.uniformLocations.set(t,i),i}createShader(){var h;const t=this.gl.createProgram(),i=this.compileShader(this.vsSource,this.gl.VERTEX_SHADER),s=this.compileShader(this.fsSource,this.gl.FRAGMENT_SHADER);if(this.gl.attachShader(t,i),this.gl.attachShader(t,s),this.gl.linkProgram(t),this.gl.validateProgram(t),this.gl.deleteShader(i),this.gl.deleteShader(s),this.gl.getProgramParameter(t,this.gl.LINK_STATUS))return t;const o=(h=this.gl.getProgramInfoLog(t))!=null?h:"";return console.error(o),this.delete(),null}compileShader(t,i){var h;const s=this.gl.createShader(i);if(this.gl.shaderSource(s,t),this.gl.compileShader(s),this.gl.getShaderParameter(s,this.gl.COMPILE_STATUS))return s;const o=(h=this.gl.getShaderInfoLog(s))!=null?h:"";return console.error(o),this.gl.deleteShader(s),null}}class L{constructor(t){n(this,"gl");n(this,"renderId");this.gl=t,this.renderId=this.gl.createVertexArray()}bind(){this.gl.bindVertexArray(this.renderId)}delete(){this.gl.deleteVertexArray(this.renderId)}addBuffer(t,i){this.bind(),t.bind();let s=0;i.elements.forEach((r,o)=>{const{count:h,type:a,normalized:l}=r,{stride:g}=i;this.gl.enableVertexAttribArray(o),this.gl.vertexAttribPointer(o,h,a,l,g,s),s+=r.count*r.size})}}class R{constructor(t,i){n(this,"gl");n(this,"data");n(this,"renderId");this.gl=t,this.data=i,this.renderId=t.createBuffer(),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.renderId),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.data,this.gl.STATIC_DRAW)}bind(){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.renderId)}delete(){this.gl.deleteBuffer(this.renderId)}}class F{constructor(t){n(this,"gl");n(this,"elements",[]);n(this,"stride",0);this.gl=t}pushFloat(t){this.elements.push({count:t,type:this.gl.FLOAT,normalized:!1,size:4}),this.stride+=4*t}pushUint(t){this.elements.push({count:t,type:this.gl.UNSIGNED_INT,normalized:!1,size:4}),this.stride+=4*t}}var f=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});function b(){var e=new f(9);return f!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function m(e,t,i){var s=t[0],r=t[1],o=t[2],h=t[3],a=t[4],l=t[5],g=t[6],u=t[7],v=t[8],d=i[0],c=i[1];return e[0]=s,e[1]=r,e[2]=o,e[3]=h,e[4]=a,e[5]=l,e[6]=d*s+c*h+g,e[7]=d*r+c*a+u,e[8]=d*o+c*l+v,e}function y(e,t,i){var s=t[0],r=t[1],o=t[2],h=t[3],a=t[4],l=t[5],g=t[6],u=t[7],v=t[8],d=Math.sin(i),c=Math.cos(i);return e[0]=c*s+d*h,e[1]=c*r+d*a,e[2]=c*o+d*l,e[3]=c*h-d*s,e[4]=c*a-d*r,e[5]=c*l-d*o,e[6]=g,e[7]=u,e[8]=v,e}function A(e,t,i){var s=i[0],r=i[1];return e[0]=s*t[0],e[1]=s*t[1],e[2]=s*t[2],e[3]=r*t[3],e[4]=r*t[4],e[5]=r*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function U(e,t,i){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/i,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function _(){var e=new f(2);return f!=Float32Array&&(e[0]=0,e[1]=0),e}function p(e,t){var i=new f(2);return i[0]=e,i[1]=t,i}(function(){var e=_();return function(t,i,s,r,o,h){var a,l;for(i||(i=2),s||(s=0),r?l=Math.min(r*i+s,t.length):l=t.length,a=s;a<l;a+=i)e[0]=t[a],e[1]=t[a+1],o(e,e,h),t[a]=e[0],t[a+1]=e[1];return t}})();const M=`#version 300 es

uniform mat3 u_Matrix;

in vec2 a_Position;

void main() {
  gl_Position = vec4( ( u_Matrix * vec3( a_Position, 1 ) ).xy, 0, 1 );
}`,x=`#version 300 es

precision highp float;

uniform vec4 u_Color;

out vec4 outColor;

void main() {
  outColor = u_Color;
}`;class z{constructor(t){n(this,"gl");n(this,"ibo");n(this,"indices");n(this,"layout");n(this,"positions");n(this,"position");n(this,"program");n(this,"rotation");n(this,"scale");n(this,"size");n(this,"vao");n(this,"vbo");this.gl=t,this.size=100,this.position=p(this.size,this.size),this.rotation=0,this.scale=p(1,1),this.positions=new Float32Array([0,0,this.size,0,this.size,this.size,0,this.size]),this.indices=new Uint32Array([0,1,2,2,3,0]),this.layout=new F(this.gl),this.layout.pushFloat(2),this.vao=new L(this.gl),this.vbo=new R(this.gl,this.positions),this.ibo=new I(this.gl,this.indices),this.vao.bind(),this.vao.addBuffer(this.vbo,this.layout),this.ibo.bind(),this.program=new C(this.gl,M,x),this.program.bind(),this.program.setUniform4f("u_Color",Math.random(),Math.random(),Math.random(),1);const i=b();m(i,i,this.position),y(i,i,this.rotation*Math.PI/180),A(i,i,this.scale),m(i,i,p(-50,-50)),this.program.setUniformMat3f("u_Matrix",i)}update(t){return t}draw(){const t=b();U(t,this.gl.canvas.width,this.gl.canvas.height),m(t,t,this.position),y(t,t,this.rotation*Math.PI/180),A(t,t,this.scale),m(t,t,p(-this.size/2,-this.size/2)),this.program.setUniformMat3f("u_Matrix",t),this.gl.drawElements(this.gl.TRIANGLES,this.ibo.count,this.gl.UNSIGNED_INT,0)}}class B{constructor(t){n(this,"gl");n(this,"geometries",new Array);this.gl=t}addGeometry(t){this.geometries.push(t)}update(t){this.geometries.forEach(i=>{i.update(t)})}draw(){(this.gl.canvas.width!==this.gl.canvas.clientWidth||this.gl.canvas.height!==this.gl.canvas.clientHeight)&&(this.gl.canvas.width=this.gl.canvas.clientWidth,this.gl.canvas.height=this.gl.canvas.clientHeight,this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height)),this.gl.clearColor(0,0,0,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.geometries.forEach(t=>{t.draw()})}}const P=()=>{const t=document.querySelector("canvas").getContext("webgl2");if(!t){console.error("Unable to Initialize WebGL");return}t.viewport(0,0,t.canvas.width,t.canvas.height);const i=new z(t),s=new B(t),r=new E;r.addSlider("x",()=>i.position[0],()=>t.canvas.width,1,l=>i.position[0]=l),r.addSlider("y",()=>i.position[1],()=>t.canvas.height,1,l=>i.position[1]=l),r.addSlider("rotation",()=>i.rotation,()=>360,1,l=>i.rotation=l),r.addSlider("scale",()=>i.scale[0],()=>2,.1,l=>{i.scale[0]=l,i.scale[1]=l}),s.addGeometry(i);let o=0,h=0;const a=l=>{requestAnimationFrame(a),h=l-o,o=l,s.update(h),r.update(),s.draw()};requestAnimationFrame(a)};window.addEventListener("load",P);
