var p=Object.defineProperty;var S=(t,e,r)=>e in t?p(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var o=(t,e,r)=>(S(t,typeof e!="symbol"?e+"":e,r),r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function r(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerpolicy&&(n.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?n.credentials="include":s.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(s){if(s.ep)return;s.ep=!0;const n=r(s);fetch(s.href,n)}})();const y="/webgl/assets/leaves.7a16732e.jpg",b=`#version 300 es

precision highp float;

uniform sampler2D u_Texture;

in vec2 v_TexCoord;

out vec4 outColor;

void main() {
  outColor = texture( u_Texture, v_TexCoord );
}`,w=`#version 300 es

in vec4 a_Position;
in vec2 a_texCoord;

out vec2 v_TexCoord;

uniform mat4 u_Model;
uniform mat4 u_View;
uniform mat4 u_Projection;

void main() {
  gl_Position = u_Projection * u_View * u_Model * a_Position;
  v_TexCoord  = a_texCoord;
}`;class x{constructor(e,r){o(this,"gl");o(this,"data");o(this,"count");o(this,"renderId");this.gl=e,this.data=r,this.count=this.data.length,this.renderId=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.renderId),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,this.data,this.gl.STATIC_DRAW)}bind(){this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.renderId)}delete(){this.gl.deleteBuffer(this.renderId)}}class F{constructor(e){o(this,"gl");this.gl=e}clear(){this.gl.clear(this.gl.COLOR_BUFFER_BIT)}draw(e,r){e.bind(),r.bind();const i=this.gl.TRIANGLES,s=this.gl.UNSIGNED_INT,n=0;this.gl.drawElements(i,r.count,s,n)}}class L{constructor(e,r,i){o(this,"gl");o(this,"vsSource");o(this,"fsSource");o(this,"renderId");o(this,"uniformLocations",new Map);this.gl=e,this.vsSource=r,this.fsSource=i,this.renderId=this.createShader()}delete(){this.gl.deleteProgram(this.renderId)}bind(){this.gl.useProgram(this.renderId)}setUniform4f(e,r,i,s,n){this.gl.uniform4fv(this.getUniformLocation(e),new Float32Array([r,i,s,n]))}setUniform1i(e,r){this.gl.uniform1i(this.getUniformLocation(e),r)}setUniformMat4f(e,r){this.gl.uniformMatrix4fv(this.getUniformLocation(e),!1,r)}getUniformLocation(e){var i;if(!this.renderId)return null;if(this.uniformLocations.has(e))return(i=this.uniformLocations.get(e))!=null?i:null;const r=this.gl.getUniformLocation(this.renderId,e);return r||console.warn("[WARN] Uniform :",e,"not found"),this.uniformLocations.set(e,r),r}createShader(){var l;const e=this.gl.createProgram(),r=this.compileShader(this.vsSource,this.gl.VERTEX_SHADER),i=this.compileShader(this.fsSource,this.gl.FRAGMENT_SHADER);if(this.gl.attachShader(e,r),this.gl.attachShader(e,i),this.gl.linkProgram(e),this.gl.validateProgram(e),this.gl.deleteShader(r),this.gl.deleteShader(i),this.gl.getProgramParameter(e,this.gl.LINK_STATUS))return e;const n=(l=this.gl.getProgramInfoLog(e))!=null?l:"";return console.error(n),this.delete(),null}compileShader(e,r){var l;const i=this.gl.createShader(r);if(this.gl.shaderSource(i,e),this.gl.compileShader(i),this.gl.getShaderParameter(i,this.gl.COMPILE_STATUS))return i;const n=(l=this.gl.getShaderInfoLog(i))!=null?l:"";return console.error(n),this.gl.deleteShader(i),null}}class P{constructor(e,r){o(this,"gl");o(this,"path");o(this,"renderId");o(this,"image");o(this,"mode");o(this,"level",0);o(this,"internalFormat");o(this,"width",1);o(this,"height",1);o(this,"border",0);o(this,"format");o(this,"type");o(this,"source",new Uint8Array([0,0,0,255]));this.gl=e,this.path=r,this.mode=this.gl.TEXTURE_2D,this.internalFormat=this.gl.RGBA,this.format=this.gl.RGBA,this.type=this.gl.UNSIGNED_BYTE,this.renderId=this.gl.createTexture(),this.gl.activeTexture(this.gl.TEXTURE0+0),this.gl.bindTexture(this.gl.TEXTURE_2D,this.renderId),this.gl.texImage2D(this.mode,this.level,this.internalFormat,this.width,this.height,this.border,this.format,this.type,this.source),this.gl.enable(this.gl.BLEND),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.image=new Image,this.image.onload=()=>{this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.NEAREST),this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!0),this.gl.texImage2D(this.mode,this.level,this.internalFormat,this.format,this.type,this.image)},this.image.src=this.path}delete(){this.gl.deleteTexture(this.renderId)}bind(e=0){this.gl.activeTexture(this.gl.TEXTURE0+e),this.gl.bindTexture(this.gl.TEXTURE_2D,this.renderId)}}class M{constructor(e){o(this,"gl");o(this,"renderId");this.gl=e,this.renderId=this.gl.createVertexArray()}bind(){this.gl.bindVertexArray(this.renderId)}delete(){this.gl.deleteVertexArray(this.renderId)}addBuffer(e,r){this.bind(),e.bind();let i=0;r.elements.forEach((s,n)=>{const{count:l,type:h,normalized:a}=s,{stride:d}=r;this.gl.enableVertexAttribArray(n),this.gl.vertexAttribPointer(n,l,h,a,d,i),i+=s.count*s.size})}}class B{constructor(e,r){o(this,"gl");o(this,"data");o(this,"renderId");this.gl=e,this.data=r,this.renderId=e.createBuffer(),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.renderId),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.data,this.gl.STATIC_DRAW)}bind(){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.renderId)}delete(){this.gl.deleteBuffer(this.renderId)}}class N{constructor(e){o(this,"gl");o(this,"elements",[]);o(this,"stride",0);this.gl=e}pushFloat(e){this.elements.push({count:e,type:this.gl.FLOAT,normalized:!1,size:4}),this.stride+=4*e}pushUint(e){this.elements.push({count:e,type:this.gl.UNSIGNED_INT,normalized:!1,size:4}),this.stride+=4*e}}var m=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function _(){var t=new m(16);return m!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function R(t,e,r){var i=r[0],s=r[1],n=r[2],l,h,a,d,g,c,E,f,u,v,T,A;return e===t?(t[12]=e[0]*i+e[4]*s+e[8]*n+e[12],t[13]=e[1]*i+e[5]*s+e[9]*n+e[13],t[14]=e[2]*i+e[6]*s+e[10]*n+e[14],t[15]=e[3]*i+e[7]*s+e[11]*n+e[15]):(l=e[0],h=e[1],a=e[2],d=e[3],g=e[4],c=e[5],E=e[6],f=e[7],u=e[8],v=e[9],T=e[10],A=e[11],t[0]=l,t[1]=h,t[2]=a,t[3]=d,t[4]=g,t[5]=c,t[6]=E,t[7]=f,t[8]=u,t[9]=v,t[10]=T,t[11]=A,t[12]=l*i+g*s+u*n+e[12],t[13]=h*i+c*s+v*n+e[13],t[14]=a*i+E*s+T*n+e[14],t[15]=d*i+f*s+A*n+e[15]),t}function D(t,e,r,i,s,n,l){var h=1/(e-r),a=1/(i-s),d=1/(n-l);return t[0]=-2*h,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*d,t[11]=0,t[12]=(e+r)*h,t[13]=(s+i)*a,t[14]=(l+n)*d,t[15]=1,t}var U=D;function C(){var t=new m(3);return m!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function I(t,e,r){var i=new m(3);return i[0]=t,i[1]=e,i[2]=r,i}(function(){var t=C();return function(e,r,i,s,n,l){var h,a;for(r||(r=3),i||(i=0),s?a=Math.min(s*r+i,e.length):a=e.length,h=i;h<a;h+=r)t[0]=e[h],t[1]=e[h+1],t[2]=e[h+2],n(t,t,l),e[h]=t[0],e[h+1]=t[1],e[h+2]=t[2];return e}})();const X=()=>{const e=document.querySelector("canvas").getContext("webgl2");if(!e){console.error("Unable to Initialize WebGL");return}const r=new Float32Array([0,0,0,0,240,0,1,0,240,180,1,1,0,180,0,1]),i=new Uint32Array([0,1,2,2,3,0]),s=new N(e);s.pushFloat(2),s.pushFloat(2);const n=new M(e),l=new B(e,r),h=new x(e,i);n.bind(),n.addBuffer(l,s);const a=new L(e,w,b);a.bind();const d=_();U(d,0,e.canvas.width,0,e.canvas.height,-1,1),a.setUniformMat4f("u_Projection",d);let g=_();R(g,g,I(0,0,0)),a.setUniformMat4f("u_View",g);let c=_();R(c,c,I(0,0,0)),a.setUniformMat4f("u_Model",c),new P(e,y).bind(),a.setUniform1i("u_Texture",0);const f=new F(e),u=()=>{requestAnimationFrame(u),(e.canvas.width!==e.canvas.clientWidth||e.canvas.height!==e.canvas.clientHeight)&&(e.canvas.width=e.canvas.clientWidth,e.canvas.height=e.canvas.clientHeight),e.viewport(0,0,e.canvas.width,e.canvas.height),e.clearColor(0,0,0,1),f.clear(),n.bind(),h.bind(),a.bind(),U(d,0,e.canvas.width,0,e.canvas.height,-1,1),R(c,_(),I(e.canvas.width/2-120,e.canvas.height/2-90,0)),a.setUniformMat4f("u_Model",c),a.setUniformMat4f("u_Projection",d),f.draw(n,h)};requestAnimationFrame(u)};window.addEventListener("load",X);
